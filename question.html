<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>クイズ表示画面</title>

  <!-- Firebase (CDN) -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
    import {
      getFirestore,
      doc,
      setDoc,
      getDoc,
      updateDoc,
      collection,
      getDocs,
      onSnapshot,
      serverTimestamp
    } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js";

    // ★ここをあなたの firebaseConfig に置き換えてください
  const firebaseConfig = {
    apiKey: "AIzaSyDqEcoMwo3BM9g_0MnKCdXDVtfg0qv-bHg",
    authDomain: "quiz-party2025.firebaseapp.com",
    projectId: "quiz-party2025",
    storageBucket: "quiz-party2025.firebasestorage.app",
    messagingSenderId: "929065994714",
    appId: "1:929065994714:web:196ebcf0208fd1096b98e3"
  };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    window.firebaseDB = db;
    window.firebaseFirestoreFuncs = {
      doc, setDoc, getDoc, updateDoc,
      collection, getDocs, onSnapshot, serverTimestamp
    };
  </script>

  <style>
    /* 背景（黒い余白を出さない：cover） */
    html, body {
      height: 100%;
      margin: 0;
    }
    body {
      background: url("bg_quiz.png") center / cover no-repeat fixed;
      font-family: system-ui, sans-serif;
      overflow: hidden;
    }

    /* idle時は何も出さない（背景だけ） */
    .layout { display: none; }

    /* --- ① 出題画面（問題だけ） --- */
    #layoutIntro {
      height: 100vh;
      display: none;
      place-items: center;
      padding: 4vh 6vw;
    }
    #introBox {
      width: min(1100px, 90vw);
      min-height: 45vh;
      background: rgba(255,255,255,0.70);
      border-radius: 18px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.25);
      padding: 34px;
      display: grid;
      gap: 18px;
      align-content: center;
      text-align: center;
    }
    #qIntroText {
      font-size: 46px;
      font-weight: 900;
      color: #111;
      line-height: 1.25;
    }
    #qIntroMedia {
      display: grid;
      place-items: center;
    }

    /* --- ② 選択肢表示＆回答画面 --- */
    #layoutQA {
      height: 100vh;
      display: none;
      grid-template-columns: 1fr 260px;
      gap: 22px;
      padding: 4vh 4vw;
      align-items: stretch;
    }

    /* 左：問題＆選択肢 */
    #qaLeft {
      display: grid;
      grid-template-rows: 1fr auto;
      gap: 18px;
      min-height: 0;
    }

    /* 問題（画像/動画エリア） */
    #qaMediaBox {
      background: rgba(255,255,255,0.70);
      border-radius: 18px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.25);
      padding: 22px;
      display: grid;
      place-items: center;
      min-height: 42vh;
      position: relative;
    }
    #qaText {
      position: absolute;
      top: 18px;
      left: 22px;
      right: 22px;
      font-size: 34px;
      font-weight: 900;
      text-align: center;
      color: #111;
      text-shadow: 0 2px 0 rgba(255,255,255,0.45);
      pointer-events: none;
    }

    /* 選択肢 */
    #qaChoices {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
      align-items: stretch;
    }
    .scrChoice {
      background: rgba(255,255,255,0.78);
      border-radius: 14px;
      border: 3px solid rgba(0,0,0,0.18);
      padding: 14px 16px;
      font-size: 28px;
      font-weight: 800;
      display: grid;
      grid-template-columns: 180px 1fr;
      gap: 10px;
      align-items: center;
      box-shadow: 0 6px 18px rgba(0,0,0,0.18);
    }
    .scrChoiceLabel { opacity: 0.95; }
    .scrChoiceText { font-weight: 900; }
    .voteBadge { margin-left: 10px; font-weight: 900; }

    .scrChoice.dim { opacity: 0.35; }
    .scrChoice.correct {
      border: 6px solid #d40000;
      background: rgba(255,235,235,0.95);
    }

    /* 右：タイマー */
    #qaRight {
      background: rgba(255,255,255,0.70);
      border-radius: 18px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.25);
      padding: 18px;
      display: grid;
      place-items: center;
      text-align: center;
    }
    #qaTimerLabel {
      writing-mode: vertical-rl;
      text-orientation: upright;
      font-size: 40px;
      font-weight: 900;
      letter-spacing: 2px;
      color: #111;
      margin-bottom: 18px;
    }
    #qaTimerBig {
      font-size: 72px;
      font-weight: 900;
      color: #111;
    }

    /* 画像表示 */
    .qMediaImg {
      max-width: 92%;
      max-height: 70%;
      border-radius: 12px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.25);
      object-fit: contain;
    }

    /* ランキング/最終結果 overlay */
    #overlayRanking {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      pointer-events: none;
    }
    #overlayBox {
      width: min(980px, 86vw);
      background: rgba(255,255,255,0.82);
      border-radius: 18px;
      box-shadow: 0 18px 50px rgba(0,0,0,0.30);
      padding: 22px 26px;
    }
    #overlayTitle {
      text-align: center;
      font-size: 36px;
      font-weight: 900;
      margin: 4px 0 14px;
      color: #111;
    }
    #overlayList {
      display: grid;
      gap: 10px;
      min-height: 120px;
    }
    .rankRow {
      background: rgba(200, 150, 110, 0.65);
      border: 3px solid rgba(120, 70, 40, 0.8);
      border-radius: 12px;
      padding: 10px 14px;
      display: grid;
      grid-template-columns: 90px 1fr 160px;
      gap: 10px;
      font-size: 26px;
      font-weight: 900;
      color: #111;
    }
    .rankVal { text-align: right; }
  </style>

  <!-- ★重要：defer -->
  <script src="script.js" defer></script>
</head>

<body>
  <!-- ① 出題画面（問題だけ） -->
  <div id="layoutIntro" class="layout">
    <div id="introBox">
      <div id="qIntroText"></div>
      <div id="qIntroMedia"></div>
    </div>
  </div>

  <!-- ② 選択肢表示＆回答画面 -->
  <div id="layoutQA" class="layout">
    <div id="qaLeft">
      <div id="qaMediaBox">
        <div id="qaText"></div>
        <div id="qaMedia"></div>
      </div>
      <div id="qaChoices"></div>
    </div>

    <div id="qaRight">
      <div id="qaTimerLabel"></div>
      <div id="qaTimerBig"></div>
    </div>
  </div>

  <!-- ランキング/最終結果 -->
  <div id="overlayRanking">
    <div id="overlayBox">
      <div id="overlayTitle"></div>
      <div id="overlayList"></div>
    </div>
  </div>
</body>
</html>







