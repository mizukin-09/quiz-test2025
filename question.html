<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>クイズ表示画面</title>

  <!-- Firebase (CDN) -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
    import {
      getFirestore,
      doc,
      setDoc,
      getDoc,
      updateDoc,
      collection,
      getDocs,
      onSnapshot,
      serverTimestamp
    } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDqEcoMwo3BM9g_0MnKCdXDVtfg0qv-bHg",
      authDomain: "quiz-party2025.firebaseapp.com",
      projectId: "quiz-party2025",
      storageBucket: "quiz-party2025.firebasestorage.app",
      messagingSenderId: "929065994714",
      appId: "1:929065994714:web:196ebcf0208fd1096b98e3"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    window.firebaseDB = db;
    window.firebaseFirestoreFuncs = {
      doc, setDoc, getDoc, updateDoc, collection, getDocs, onSnapshot, serverTimestamp
    };
  </script>

  <style>
html, body { margin:0; padding:0; height:100%; }
body{
  font-family: system-ui, sans-serif;
  padding: 28px 44px;
  color:#111;
  background: #000 url("picture_quiz/bg_quiz.png") center center / cover no-repeat fixed;
  overflow: hidden;
}

/* 全体（左：問題＋選択肢／右：タイマー） */
#screen{
  height: calc(100vh - 56px);
  max-width: 1650px;
  margin: 0 auto;
  display: grid;
  grid-template-columns: minmax(0, 1fr) 260px;
  grid-template-rows: auto 1fr;
  column-gap: 46px;
  row-gap: 22px;
  align-items: start;
}

/* 左カラム：中央寄せ */
#problemBox, #screenChoices{
  width: min(1180px, 100%);
  margin: 0 auto;
}

#problemBox{ grid-column: 1; grid-row: 1; }
#screenChoices{ grid-column: 1; grid-row: 2; }
#timerBox{ grid-column: 2; grid-row: 1 / span 2; align-self: stretch; }

/* 問題表示の枠（出題/回答共通） */
#problemBox{
  display:none;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 14px;
  min-height: 360px;
  background: rgba(255,255,255,0.88);
  border-radius: 28px;
  padding: 46px 56px;
  border: 12px solid rgba(0,0,0,0.12);
  box-shadow: 0 18px 44px rgba(0,0,0,0.35);
}
#screenQuestionText{
  display:none;
  font-size: clamp(40px, 3.2vw, 64px);
  margin: 0;
  font-weight: 900;
  text-align: center;
  line-height: 1.25;
  text-shadow: 0 1px 0 rgba(255,255,255,0.35);
}
#screenImage{
  display:none;
  width: 100%;
  max-height: 44vh;
  border-radius: 14px;
  box-shadow: 0 10px 18px rgba(0,0,0,0.22);
  object-fit: contain;
  background: rgba(255,255,255,0.75);
}

/* 右側：制限時間 */
#timerBox{
  display:none;
  background: rgba(255,255,255,0.78);
  border-radius: 28px;
  padding: 28px 20px;
  border: 12px solid rgba(0,0,0,0.10);
  box-shadow: 0 14px 30px rgba(0,0,0,0.28);

  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 18px;
}
#timerLabel{
  font-weight: 900;
  font-size: 56px;
  writing-mode: vertical-rl;
  text-orientation: upright;
  letter-spacing: 10px;
  opacity: 0.88;
  line-height: 1;
}
#screenTimer{
  display:none;
  font-weight: 900;
  font-size: clamp(140px, 10vw, 240px);
  line-height: 1;
}

/* 選択肢（画面共有用） */
#screenChoices{
  display:none;
  flex-direction: column;
  align-items: center;
  gap: 20px;
  padding-top: 6px;
}
.screenChoice{
  position: relative;
  width: 100%;
  min-height: 78px;
  font-size: clamp(26px, 2.2vw, 38px);
  padding: 16px 22px;
  background: rgba(255,255,255,0.92);
  border-radius: 16px;
  box-shadow: 0 8px 18px rgba(0,0,0,0.18);
  border: 4px solid rgba(0,0,0,0.14);
  display: flex;
  align-items: center;
  justify-content: center;
}
.choiceMainText{
  width: 100%;
  text-align: center;
  font-weight: 900;
  padding: 0 140px; /* 右端の票数スペース確保 */
}
.voteCount{
  position: absolute;
  right: 26px;
  font-weight: 900;
  font-size: clamp(22px, 1.8vw, 34px);
}
.dimChoice{ opacity: 0.35; }
.correctChoice{
  border: 6px solid #e00000;
  background: rgba(255,230,230,0.95);
  opacity: 1;
}

/* ランキング（中央） */
#screenRanking{
  display:none;
  grid-column: 1 / span 2;
  grid-row: 1 / span 2;
  justify-content:center;
  align-items:center;
  min-height: calc(100vh - 52px);
}
#rankingPanel{
  width: min(760px, 92vw);
  background: rgba(255,255,255,0.88);
  border-radius: 16px;
  padding: 22px 24px;
  box-shadow: 0 12px 30px rgba(0,0,0,0.35);
  border: 6px solid rgba(0,0,0,0.12);
}
#rankingTitle{
  text-align:center;
  font-size: 30px;
  margin: 0 0 16px;
  font-weight: 900;
}

/* 下から積み上げ */
#rankingList{
  display:flex;
  flex-direction: column-reverse;
  gap: 12px;
}
.rankItem{
  background: rgba(200, 160, 120, 0.92);
  border: 2px solid rgba(90, 55, 25, 0.65);
  border-radius: 12px;
  padding: 12px 16px;
  font-size: 22px;
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.35);
}
  </style>

  <script src="script.js"></script>
</head>

<body>
  <div id="screen">
    <div id="problemBox">
      <div id="screenQuestionText"></div>
      <img id="screenImage" alt="問題画像" />
    </div>

    <div id="timerBox">
      <div id="timerLabel"></div>
      <div id="screenTimer"></div>
    </div>

    <div id="screenChoices"></div>

    <div id="screenRanking">
      <div id="rankingPanel">
        <h2 id="rankingTitle"></h2>
        <div id="rankingList"></div>
      </div>
    </div>
  </div>
</body>
</html>








